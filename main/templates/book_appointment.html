{% extends 'base.html' %}

{% block title %}Book an Appointment - MedConnect{% endblock %}

{% block content %}
<h1 style="font-size: 32px; text-align: center; color: #2C3E50; margin-bottom: 20px;">Book an Appointment</h1>
<p style="font-size: 18px; text-align: center; color: #7F8C8D; margin-bottom: 30px;">Find the right doctor by searching for their name or specialization, and schedule an appointment at your convenience.</p>

<!-- Search Form -->
<form method="get" style="max-width: 600px; margin: 0 auto 20px auto; display: flex; align-items: center; justify-content: center;">
    <input type="text" name="search" placeholder="Search for a doctor..." value="{{ search_query }}" 
           style="width: 80%; padding: 10px; border: 1px solid #BDC3C7; border-radius: 4px; margin-right: 10px; font-size: 16px;">
    <button type="submit" style="background-color: #3498DB; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">Search</button>
</form>

<form method="post" style="max-width: 600px; margin: 0 auto; background-color: #F8F9F9; padding: 30px; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);">
  {% csrf_token %}
  
  <div style="margin-bottom: 20px;">
    <label for="doctor" style="font-size: 18px; color: #34495E;">Select Doctor:</label>
    <select id="doctor" name="doctor" required
            style="width: 100%; padding: 12px; font-size: 16px; border: 1px solid #BDC3C7; border-radius: 4px; background-color: #ECF0F1;">
      {% for doctor in doctors %}
        <option value="{{ doctor.id }}">{{ doctor.user.username }} ({{ doctor.specialization }}) - Location: {{ doctor.office_location }}</option>
      {% endfor %}
    </select>
  </div>
  
  <div style="margin-bottom: 20px;">
    <label for="date" style="font-size: 18px; color: #34495E;">Select Date:</label>
    <input type="date" id="date" name="date" required
           style="width: 100%; padding: 12px; font-size: 16px; border: 1px solid #BDC3C7; border-radius: 4px; background-color: #ECF0F1;">
  </div>

  <div style="margin-bottom: 20px;">
    <label for="time" style="font-size: 18px; color: #34495E;">Select Time:</label>
    <input type="time" id="time" name="time" required
           style="width: 100%; padding: 12px; font-size: 16px; border: 1px solid #BDC3C7; border-radius: 4px; background-color: #ECF0F1;">
  </div>
  
  <div style="text-align: center;">
    <button type="submit" style="background-color: #a80af1; color: white; padding: 12px 30px; font-size: 18px; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease;">
      Book Appointment
    </button>
  </div>
</form>

{% if not doctors %}
    <p style="text-align: center; font-size: 16px; color: #E74C3C;">No doctors found matching your search criteria.</p>
{% endif %}

{% endblock %}
